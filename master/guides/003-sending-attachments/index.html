
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../002-a-simple-bot/">
      
      
        <link rel="next" href="../004-creating-custom-parsers/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>Sending attachments - Nio-Bot Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sending-attachments" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Nio-Bot Docs" class="md-header__button md-logo" aria-label="Nio-Bot Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Nio-Bot Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Sending attachments
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/nexy7574/niobot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Nio-Bot Docs" class="md-nav__button md-logo" aria-label="Nio-Bot Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Nio-Bot Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nexy7574/niobot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../001-getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started / quick start
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../002-a-simple-bot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A simple bot - example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Sending attachments
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Sending attachments
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-you-start" class="md-nav__link">
    <span class="md-ellipsis">
      Before you start
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    <span class="md-ellipsis">
      FAQ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sending" class="md-nav__link">
    <span class="md-ellipsis">
      Sending:
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sending:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#regular-files" class="md-nav__link">
    <span class="md-ellipsis">
      Regular files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#images" class="md-nav__link">
    <span class="md-ellipsis">
      Images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#audio" class="md-nav__link">
    <span class="md-ellipsis">
      Audio
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#videos" class="md-nav__link">
    <span class="md-ellipsis">
      Videos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unsure-which-to-use" class="md-nav__link">
    <span class="md-ellipsis">
      Unsure which to use?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disabling-extra-media-features" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling extra media features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Disabling extra media features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disabling-blurhash-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling blurhash generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disabling-thumbnail-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling thumbnail generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disabling-rich-data" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling rich data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Disabling rich data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#images_1" class="md-nav__link">
    <span class="md-ellipsis">
      Images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#videos_1" class="md-nav__link">
    <span class="md-ellipsis">
      Videos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#audio_1" class="md-nav__link">
    <span class="md-ellipsis">
      Audio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../004-creating-custom-parsers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating custom parsers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../005-direct-messages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Direct Messages
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/attachment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Attachments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/context/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Context
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Event Reference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Utils
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utils/checks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Checks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utils/federation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Federation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utils/help_command/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The help command
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utils/parsers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parsers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utils/string_view/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    String View
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utils/typing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Typing helper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utils/unblock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unblock
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-you-start" class="md-nav__link">
    <span class="md-ellipsis">
      Before you start
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    <span class="md-ellipsis">
      FAQ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sending" class="md-nav__link">
    <span class="md-ellipsis">
      Sending:
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sending:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#regular-files" class="md-nav__link">
    <span class="md-ellipsis">
      Regular files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#images" class="md-nav__link">
    <span class="md-ellipsis">
      Images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#audio" class="md-nav__link">
    <span class="md-ellipsis">
      Audio
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#videos" class="md-nav__link">
    <span class="md-ellipsis">
      Videos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unsure-which-to-use" class="md-nav__link">
    <span class="md-ellipsis">
      Unsure which to use?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disabling-extra-media-features" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling extra media features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Disabling extra media features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disabling-blurhash-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling blurhash generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disabling-thumbnail-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling thumbnail generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disabling-rich-data" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling rich data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Disabling rich data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#images_1" class="md-nav__link">
    <span class="md-ellipsis">
      Images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#videos_1" class="md-nav__link">
    <span class="md-ellipsis">
      Videos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#audio_1" class="md-nav__link">
    <span class="md-ellipsis">
      Audio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/nexy7574/niobot/edit/master/docs/guides/003-sending-attachments.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="sending-attachments">Sending attachments<a class="headerlink" href="#sending-attachments" title="Permanent link">&para;</a></h1>
<p>Sometimes, you want to upload attachments in your chat. Be that images, videos, or other kinds of files.
NioBot supports this, and it's very easy to do.</p>
<h2 id="before-you-start">Before you start<a class="headerlink" href="#before-you-start" title="Permanent link">&para;</a></h2>
<p>In order to use the majority of the features in this guide, you will need to install <code>ffmpeg</code> and <code>imagemagick</code>.
These are used for thumbnail generation, and metadata detection.</p>
<p>You should use your package manager to install these, as they are not python packages.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:5"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Debian/Ubuntu</label><label for="__tabbed_1_2">Arch</label><label for="__tabbed_1_3">Fedora</label><label for="__tabbed_1_4">macOS</label><label for="__tabbed_1_5">Windows</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-bash copy highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>ffmpeg<span class="w"> </span>imagemagick
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash copy highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sudo<span class="w"> </span>pacman<span class="w"> </span>-S<span class="w"> </span>ffmpeg<span class="w"> </span>imagemagick
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash copy highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>ffmpeg<span class="w"> </span>imagemagick
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash copy highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>brew<span class="w"> </span>install<span class="w"> </span>ffmpeg<span class="w"> </span>imagemagick
</span></code></pre></div>
</div>
<div class="tabbed-block">
<p><div class="language-powershell copy highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">choco</span> <span class="n">install</span> <span class="n">ffmpeg</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">choco</span> <span class="n">install</span> <span class="n">imagemagick</span>
</span></code></pre></div>
Or, install it yourself.
Make sure the binaries are in your PATH:</p>
<ul>
<li><a href="https://www.gyan.dev/ffmpeg/builds/ffmpeg-git-essentials.7z">gyan.dev/ffmpeg/builds/ffmpeg-git-essentials.7z</a></li>
<li><a href="https://imagemagick.org/script/download.php#windows">imagemagick.org/script/download.php</a></li>
</ul>
</div>
</div>
</div>
<h2 id="faq">FAQ<a class="headerlink" href="#faq" title="Permanent link">&para;</a></h2>
<details class="question">
<summary>Why do I need to install <code>ffmpeg</code> and <code>imagemagick</code>?</summary>
<p><code>imagemagick</code> is actually optional - if you trust <code>ffprobe</code> to work with all of your images (in some cases it can
fail to detect newer image formats), then you can skip installing it.</p>
<p>However, <code>ffmpeg</code> is required for all but file attachments. This is because in order to get some rich data, such as
dimensions and duration, we need to use <code>ffprobe</code> to get this data.
Furthermore, in the event <code>imagemagick</code> is not installed, the metadata fetcher falls back to <code>ffprobe</code>.</p>
<p>Not having these installed will result in a <code>RuntimeError</code> being raised when you try to send an attachment
when it tries to fetch metadata. This is because the metadata fetcher will not be able to find <code>ffprobe</code> or
<code>imagemagick</code> in your PATH.</p>
</details>
<details class="question">
<summary>Why does it take a couple of seconds for <code>&lt;attachment&gt;.from_file()</code> to return?</summary>
<p>The <code>from_file</code> method (see: <a class="autorefs autorefs-internal" href="../../reference/attachment/#niobot.attachment.VideoAttachment.from_file">niobot.VideoAttachment.from_file</a>, <a class="autorefs autorefs-internal" href="../../reference/attachment/#niobot.attachment.ImageAttachment.from_file">niobot.ImageAttachment.from_file</a>, etc.) 
does a lot of heavy lifting in terms of preparing a file with all the bells and whistles for an upload. 
This means that it has to do a lot
of processing, which may take a couple of seconds to return.</p>
</details>
<hr />
<h2 id="sending">Sending:<a class="headerlink" href="#sending" title="Permanent link">&para;</a></h2>
<h3 id="regular-files">Regular files<a class="headerlink" href="#regular-files" title="Permanent link">&para;</a></h3>
<p>Here, regular files can be anything that isn't a video, image, or audio file. This includes text files, PDFs, etc.
You can even send binary or pre-encrypted (why?) files if you want to.</p>
<p>Regular files are the simplest file type in niobot, in terms of code complexity and also features.
Regular files do not support:</p>
<ul>
<li>Thumbnails</li>
<li>Rich data</li>
<li>Previews</li>
</ul>
<p>All you get from thumbnails is the file name, and the file size. That's it.</p>
<p>Anyway, here's how you could send an example text (foo.txt) file:
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span> <span class="nn">niobot</span> <span class="kn">import</span> <span class="n">NioBot</span><span class="p">,</span> <span class="n">Context</span><span class="p">,</span> <span class="n">FileAttachment</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="o">...</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="nd">@bot</span><span class="o">.</span><span class="n">comand</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;upload.txt&quot;</span><span class="p">)</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">upload_txt</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">Context</span><span class="p">):</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Sends a text file!&quot;&quot;&quot;</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    <span class="n">attachment</span> <span class="o">=</span> <span class="k">await</span> <span class="n">FileAttachment</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;file.txt&quot;</span><span class="p">)</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">attachment</span><span class="p">)</span>
</span></code></pre></div></p>
<p>This results in the following:
<a class="glightbox" href="https://docs.nio-bot.dev/assets/guides/images/sending-attachments/file-send.avif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://docs.nio-bot.dev/assets/guides/images/sending-attachments/file-send.avif" /></a></p>
<p>You can then click on the file to download it!</p>
<h3 id="images">Images<a class="headerlink" href="#images" title="Permanent link">&para;</a></h3>
<p>Images are a bit more complex than regular files. They support thumbnails, rich data, and previews.</p>
<details class="note">
<summary>Thumbnails for images</summary>
<p>While you may think that thumbnails for images are useless, they are actually very useful for clients.
Just beware though, having a larger or equal size image for your thumbnail is very counter-productive.</p>
<p>A valid use case for image thumbnails is for lower-resolution, likely compressed versions of the image you're
sending. Paired with a blurhash, this can provide a very good "placeholder" image for people on 
painfully slow connections.</p>
</details>
<p>For your convenience, unless disabled, niobot will automatically generate a "blurhash" for your image.</p>
<p>A blurhash is very good for providing a "placeholder" image, as it is generated by a string of around 30 characters.
This means people on super slow connections can see a pretty preview of the image (without much detail), instead of
having an ugly loading spinner or outright blank space in place of a loading image.</p>
<p>For example:</p>
<p><a class="glightbox" href="https://docs.nio-bot.dev/assets/guides/images/sending-attachments/blurhash-hashed.avif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="pre-blurhash (after loading the image)" loading="lazy" src="https://docs.nio-bot.dev/assets/guides/images/sending-attachments/blurhash-hashed.avif" /></a>
<a class="glightbox" href="https://docs.nio-bot.dev/assets/guides/images/sending-attachments/blurhash-dehashed.avif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="post-blurhash (after loading the image)" loading="lazy" src="https://docs.nio-bot.dev/assets/guides/images/sending-attachments/blurhash-dehashed.avif" /></a></p>
<details class="info">
<summary>This may slow down your image upload</summary>
<p>Generating blurhashes, especially for large images, even more especially with a weak CPU, can be very slow.
While this will not block your code execution, it means you must wait for the blurhash to be generated before
you can do anything with the image.</p>
<p>You may want to disable this behaviour. See <a href="#disabling-extra-media-features">disabling extra media features</a>.</p>
</details>
<p>And here's an example:
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">from</span> <span class="nn">niobot</span> <span class="kn">import</span> <span class="n">NioBot</span><span class="p">,</span> <span class="n">Context</span><span class="p">,</span> <span class="n">ImageAttachment</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="o">...</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="nd">@bot</span><span class="o">.</span><span class="n">comand</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;upload.png&quot;</span><span class="p">)</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">upload_png</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">Context</span><span class="p">):</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Sends a png image!&quot;&quot;&quot;</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    <span class="n">attachment</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ImageAttachment</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;file.png&quot;</span><span class="p">)</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">attachment</span><span class="p">)</span>
</span></code></pre></div></p>
<h3 id="audio">Audio<a class="headerlink" href="#audio" title="Permanent link">&para;</a></h3>
<p>Audio files are actually simpler than images, however they do not support thumbnails or rich data outside of their
duration.</p>
<details class="warning">
<summary>Beware your codec!</summary>
<p>You should aim to have your audio files as <code>opus</code>, <code>vorbis</code>, <code>aac</code>, <code>flac</code>, or <code>mp3</code> encoded files, as some clients
may not be able to play other formats.
Also be mindful of their containers, since some (such as <code>mkv</code>) won't play in some clients.</p>
</details>
<p>Here's an example:
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">from</span> <span class="nn">niobot</span> <span class="kn">import</span> <span class="n">NioBot</span><span class="p">,</span> <span class="n">Context</span><span class="p">,</span> <span class="n">AudioAttachment</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="o">...</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="nd">@bot</span><span class="o">.</span><span class="n">comand</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;upload.mp3&quot;</span><span class="p">)</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">upload_mp3</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">Context</span><span class="p">):</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Sends a mp3 audio file!&quot;&quot;&quot;</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>    <span class="n">attachment</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AudioAttachment</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;file.mp3&quot;</span><span class="p">)</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">attachment</span><span class="p">)</span>
</span></code></pre></div></p>
<h3 id="videos">Videos<a class="headerlink" href="#videos" title="Permanent link">&para;</a></h3>
<p>Videos are the most complex file type in niobot. They support thumbnails, rich data, and previews.</p>
<p>Again though, NioBot makes this easy. All you need to do is pass a video file to <code>VideoAttachment.from_file()</code>.</p>
<p>The same warnings apply as <a href="#images">images</a>, except for the blurhash. Blurhashes are not generated for videos.
However, thumbnails are generated by default, with their own blurhashes.
For simplicity, the video's auto-generated thumbnail is simply the first frame of the video.</p>
<div class="admonition danger">
<p class="admonition-title">Beware of your codec(s)!</p>
<p>A lot of matrix clients at the moment are simple HTML5-based clients - meaning they can only play a limited
set of codecs out of the box.</p>
<p>You should aim to keep your video codecs as <code>h264</code>, <code>vp8</code>, or <code>vp9</code>, as these are the most widely supported.
However, some native apps may not even support vp8/vp9. Use h264/avc when in doubt.</p>
<p>Look at <a href="#audio">audio's warning</a> for more information about audio codecs.</p>
</div>
<p>Here's an example:
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">from</span> <span class="nn">niobot</span> <span class="kn">import</span> <span class="n">NioBot</span><span class="p">,</span> <span class="n">Context</span><span class="p">,</span> <span class="n">VideoAttachment</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="o">...</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="nd">@bot</span><span class="o">.</span><span class="n">comand</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;upload.mp4&quot;</span><span class="p">)</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">upload_mp4</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">Context</span><span class="p">):</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Sends a mp4 video!&quot;&quot;&quot;</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>    <span class="n">attachment</span> <span class="o">=</span> <span class="k">await</span> <span class="n">VideoAttachment</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;file.mp4&quot;</span><span class="p">)</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">attachment</span><span class="p">)</span>
</span></code></pre></div></p>
<h3 id="unsure-which-to-use">Unsure which to use?<a class="headerlink" href="#unsure-which-to-use" title="Permanent link">&para;</a></h3>
<p>If you aren't sure which file type you have, you can find out the most appropriate Attachment type using
<a class="autorefs autorefs-internal" href="../../reference/attachment/#niobot.attachment.which"><code>niobot.attachment.which</code></a> - this will return either <a class="autorefs autorefs-internal" href="../../reference/attachment/#niobot.attachment.VideoAttachment"><code>VideoAttachment</code></a>,
<a class="autorefs autorefs-internal" href="../../reference/attachment/#niobot.attachment.ImageAttachment"><code>ImageAttachment</code></a>, <a class="autorefs autorefs-internal" href="../../reference/attachment/#niobot.attachment.AudioAttachment"><code>AudioAttachment</code></a>,
or <a class="autorefs autorefs-internal" href="../../reference/attachment/#niobot.attachment.FileAttachment"><code>FileAttachment</code></a>, based on the mime type of the file.</p>
<p>Fpr example:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kn">import</span> <span class="nn">random</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="kn">import</span> <span class="nn">niobot</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="o">...</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="nd">@bot</span><span class="o">.</span><span class="n">comand</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;upload&quot;</span><span class="p">)</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">upload_mp4</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">Context</span><span class="p">):</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Sends a random file!&quot;&quot;&quot;</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>    <span class="n">files</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;file.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;file.mp4&quot;</span><span class="p">,</span> <span class="s2">&quot;file.mp3&quot;</span><span class="p">,</span> <span class="s2">&quot;file.png&quot;</span><span class="p">)</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>    <span class="n">file_name</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>    <span class="n">attachment_type</span> <span class="o">=</span> <span class="n">niobot</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>    <span class="n">attachment</span> <span class="o">=</span> <span class="k">await</span> <span class="n">attachment_type</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>    <span class="c1"># ^ can also be written as `attachment = await niobot.which(file_name).from_file(file_name)`</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">attachment</span><span class="p">)</span>
</span></code></pre></div>
<p>This will upload using the appropriate file type.</p>
<h2 id="disabling-extra-media-features">Disabling extra media features<a class="headerlink" href="#disabling-extra-media-features" title="Permanent link">&para;</a></h2>
<h3 id="disabling-blurhash-generation">Disabling blurhash generation<a class="headerlink" href="#disabling-blurhash-generation" title="Permanent link">&para;</a></h3>
<details class="warning">
<summary>This will harm the user experience</summary>
<p>Disabling blurhash generation is a terrible idea - unless you make sure your uploads are a matter of kilobytes,
you will <em>always</em> see blank spots while at least a thumbnail is loaded. Please consider alternative options.</p>
</details>
<p>for <a class="autorefs autorefs-internal" href="../../reference/attachment/#niobot.attachment.VideoAttachment">niobot.VideoAttachment</a> and <a class="autorefs autorefs-internal" href="../../reference/attachment/#niobot.attachment.ImageAttachment">niobot.ImageAttachment</a>:
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kn">from</span> <span class="nn">niobot</span> <span class="kn">import</span> <span class="n">NioBot</span><span class="p">,</span> <span class="n">Context</span><span class="p">,</span> <span class="n">ImageAttachment</span><span class="p">,</span> <span class="n">VideoAttachment</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="o">...</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>    <span class="n">attachment</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ImageAttachment</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;file.png&quot;</span><span class="p">,</span> <span class="n">generate_blurhash</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>    <span class="c1"># or for Videos</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>    <span class="n">attachment</span> <span class="o">=</span> <span class="k">await</span> <span class="n">VideoAttachment</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;file.mp4&quot;</span><span class="p">,</span> <span class="n">generate_blurhash</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div></p>
<h3 id="disabling-thumbnail-generation">Disabling thumbnail generation<a class="headerlink" href="#disabling-thumbnail-generation" title="Permanent link">&para;</a></h3>
<details class="warning">
<summary>This will harm the user experience</summary>
<p>If you intend to disable thumbnail generation, you should provide your own thumbnail, or at the very least
leave blurhash generation enabled.</p>
<p>Otherwise, while your video loads, clients will most likely just show a completely transparent box, with a loading
spinner at a stretch. This leaves a massive chunk of the UI completely blank while your video loads.</p>
</details>
<p>for <a class="autorefs autorefs-internal" href="../../reference/attachment/#niobot.attachment.VideoAttachment">niobot.VideoAttachment</a> only:
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">from</span> <span class="nn">niobot</span> <span class="kn">import</span> <span class="n">NioBot</span><span class="p">,</span> <span class="n">Context</span><span class="p">,</span> <span class="n">ImageAttachment</span><span class="p">,</span> <span class="n">VideoAttachment</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="o">...</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>    <span class="n">attachment</span> <span class="o">=</span> <span class="k">await</span> <span class="n">VideoAttachment</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;file.mp4&quot;</span><span class="p">,</span> <span class="n">thumbnail</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div></p>
<h3 id="disabling-rich-data">Disabling rich data<a class="headerlink" href="#disabling-rich-data" title="Permanent link">&para;</a></h3>
<div class="admonition danger">
<p class="admonition-title">A lot of rich data fields will still require values for clients to properly render the media!</p>
<p>In this case, "rich data" refers to some "optional" fields in media uploads, such as <code>height</code>, <code>width</code>, <code>duration</code>,
etc. These fields are not required for the server to accept the upload, but they are often used by clients to
figure out how to properly display the media.</p>
</div>
<p>"Rich data" is gathered from the <a class="autorefs autorefs-internal" href="../../reference/attachment/#niobot.attachment.get_metadata">get_metadata</a> function, which itself calls <code>ffprobe</code>/imagemagick
as a subprocess. If, for whatever reason, this is undesirable, you can avoid it.</p>
<p>Disabling rich data is not 100% possible, but you can avoid it by passing minimal values where it would automatically
be filled in:</p>
<h4 id="images_1">Images<a class="headerlink" href="#images_1" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">from</span> <span class="nn">niobot</span> <span class="kn">import</span> <span class="n">ImageAttachment</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>    <span class="n">attachment</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ImageAttachment</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;file.png&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">unsafe</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="videos_1">Videos<a class="headerlink" href="#videos_1" title="Permanent link">&para;</a></h4>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">from</span> <span class="nn">niobot</span> <span class="kn">import</span> <span class="n">VideoAttachment</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>    <span class="n">attachment</span> <span class="o">=</span> <span class="k">await</span> <span class="n">VideoAttachment</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;file.mp4&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></code></pre></div>
You may also want to consider either manually passing a thumbnail, or disabling thumbnail auto generation, as otherwise
you'll still have ffmpeg/imagemagick called.</p>
<h4 id="audio_1">Audio<a class="headerlink" href="#audio_1" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">from</span> <span class="nn">niobot</span> <span class="kn">import</span> <span class="n">AudioAttachment</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>    <span class="n">attachment</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AudioAttachment</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;file.mp3&quot;</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></code></pre></div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">June 12, 2024 15:28:43</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">July 12, 2023 21:22:20</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../002-a-simple-bot/" class="md-footer__link md-footer__link--prev" aria-label="Previous: A simple bot - example">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                A simple bot - example
              </div>
            </div>
          </a>
        
        
          
          <a href="../004-creating-custom-parsers/" class="md-footer__link md-footer__link--next" aria-label="Next: Creating custom parsers">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Creating custom parsers
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://matrix.to/#/#niobot:nexy7574.co.uk" target="_blank" rel="noopener" title="matrix.to" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M.632.55v22.9H2.28V24H0V0h2.28v.55zm7.043 7.26v1.157h.033a3.312 3.312 0 0 1 1.117-1.024c.433-.245.936-.365 1.5-.365.54 0 1.033.107 1.481.314.448.208.785.582 1.02 1.108.254-.374.6-.706 1.034-.992.434-.287.95-.43 1.546-.43.453 0 .872.056 1.26.167.388.11.716.286.993.53.276.245.489.559.646.951.152.392.23.863.23 1.417v5.728h-2.349V11.52c0-.286-.01-.559-.032-.812a1.755 1.755 0 0 0-.18-.66 1.106 1.106 0 0 0-.438-.448c-.194-.11-.457-.166-.785-.166-.332 0-.6.064-.803.189a1.38 1.38 0 0 0-.48.499 1.946 1.946 0 0 0-.231.696 5.56 5.56 0 0 0-.06.785v4.768h-2.35v-4.8c0-.254-.004-.503-.018-.752a2.074 2.074 0 0 0-.143-.688 1.052 1.052 0 0 0-.415-.503c-.194-.125-.476-.19-.854-.19-.111 0-.259.024-.439.074-.18.051-.36.143-.53.282a1.637 1.637 0 0 0-.439.595c-.12.259-.18.6-.18 1.02v4.966H5.46V7.81zm15.693 15.64V.55H21.72V0H24v24h-2.28v-.55z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "content.action.edit", "navigation.footer", "header.autohide", "search.share", "navigation.instant", "navigation.tracking"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>